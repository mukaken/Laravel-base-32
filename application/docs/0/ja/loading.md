# クラスのオートロード

## 内容

- [基本](#the-basics)
- [ディレクトリーを登録する](#directories)
- [マップを登録する](#mappings)
- [名前空間を登録する](#namespaces)

<a name="the-basics"></a>
## 基本

オートローディングであなたはクラスの読み込みで明確に*require*したり*include*したりする必要がなくなり、のんびりできます。アプリケーションにリクエストがあり、クラスが本当に必要になった時のみ読込されますから、あなたは関連するファイルを読み込むこと無く、どんなクラスでも直ぐに使用できます。

デフォルトでは、**models**と**libraries**ディレクトリーが、**application/start.php**ファイルの中で、オートロードされるように登録されています。クラス名をすべて小文字にしたファイル名を使用する規約になっています。例えば、"User"クラスは、modelsディレクトリーの中に、"user.php"という名前のファイルで設置しなくてはなりません。また、クラスをサブディレクトリーに入れ、ネストすることもできます。名前空間をディレクトリー構造に合わせるだけです。ですから、"Entities\User"クラスは、modelsディレクトリーの中に、"entities/user.php"という名前で設置します。

<a name="directories"></a>
## ディレクトリーを登録する

上で示した通り、modelsとlibrariesディレクトリーはデフォルトでオートロードされます。しかしながら、クラスと同じファイル名を付ける規約を使い、どのディレクトリーでも登録することができます。

#### オートロードするディレクトリーを登録する

	Autoloader::directories(array(
		path('app').'entities',
		path('app').'repositories',
	));

<a name="mappings"></a>
## マップを登録する

時には、手動でクラスに関連するファイルをマッピングしたい時もあるでしょう。これは一番効率が良い、クラスのローディング方法です。

#### オートローダーにクラスとファイルのマップを登録する

	Autoloader::map(array(
		'User'    => path('app').'models/user.php',
		'Contact' => path('app').'models/contact.php',
	));

<a name="namespaces"></a>
## 名前空間を登録する

多くのサードパーティライブラリーはPSR-0規約に従った構造をしています。PSR-0では、クラス名はファイル名と一致しており、ディレクトリー構造が名前空間になります。もし、PSR-0ライブラリーを使用するならば、ルートの名前空間とディレクトリーをオートローダーに登録してください。

#### 名前空間をオートローダーに登録する

	Autoloader::namespaces(array(
		'Doctrine' => path('libraries').'Doctrine',
	));

PHPで名前空間が使えるようになる前は、多くのプロジェクトで下線(\_)がディレクトリー構造を表していました。もし、あなたがこのような古風なライブラリーを使っていても、オートローダーに登録するのは簡単です。例えば、SwiftMailerを使っているのでしたら、全てのクラスは"Swift\_"で始まっていることに気がついているでしょう。では、下線を使っているプロジェクトをルートとして指定することで、"Swift"をオートローダーに登録してみましょう。

#### 「下線」使用のライブラリーをオートローダーに登録する

	Autoloader::underscored(array(
		'Swift' => path('libraries').'SwiftMailer',
	));